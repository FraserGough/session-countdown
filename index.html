<!DOCTYPE html>
<html lang="en">
	<head>
		<title>The final countdown</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style>
			@font-face {
				font-family: E1234;
				src:url(E1234.ttf);
			}
			#countdownClock {
				display:grid;
				font-family:E1234;
				text-align:center;
				color:#7FFF00;
				background-color:black;
				padding-top:10px;
				padding-bottom:10px;
				overflow:hidden;
			}
			#clockBox {
				width:45%;
				background-color:Plum;
				filter:drop-shadow(8px 8px 6px green);
				margin-top:20%;
				padding:20px;
				margin-left:auto;
				margin-right:auto;
				align-items:center;
			}
			@media (max-width:640px) {
				#clockBox {
					margin-top:45%;
					width:94%;
				}
			}
			#controls {
				margin-top:10px;
				padding-left:5px;
			}
			.controlItem {
				font-family:system-ui; sans-serif;
				font-size:1em;
				line-height:1.5;
				display:grid;
				grid-template-columns:2em auto;
				gap:0.5em;
			}
			body {
				background-image:url("backgroundImg.jpg");
				background-size:100% 100%;
				background-attachment:fixed;
				background-repeat:no-repeat;
				background-color:Thistle;
			}
		</style>
		<script>
			const targetDate = new Date("Mar 25 2026 17:00:00").getTime();
			let displayObjects = "";

			function getRandom() {
				const max = 5 * 86400000;
				const min = -2 * 8640000;
				return Math.random() * (max - min) + min;
			}

			function initialise() {
				if (document.getElementById("orclDisplay").checked) {
					displayObjects = new Map([
						["hours",0]
					]);
				} else {
					displayObjects = new Map([
						["days",0],
						["hours",0],
						["minutes",0],
						["seconds",0]
					]);
				}
				const clockContainer = document.getElementById("countdownClock");
				clockContainer.innerHTML = "";
				let colsString = "";
				let i = 1;
				do {
					colsString = colsString + "auto ";
					i = i + 1;
				} while (i <= displayObjects.size);
				colsString = colsString.trim() + ";";
				clockContainer.style.gridTemplateColumns = colsString;
				displayObjects.forEach((value,key) => {
					const numContainer = document.createElement("div");
					const number = document.createTextNode(value);
					numContainer.appendChild(number);
					numContainer.id = key;
					numContainer.style.gridRowStart = 1; 
					document.getElementById("countdownClock").append(numContainer);
					const labelContainer = document.createElement("div");
					const container = document.createTextNode(key);
					labelContainer.appendChild(container);
					labelContainer.style.gridRowStart = 2;
					document.getElementById("countdownClock").append(labelContainer);
				})
			}
			
			function runClock() {
				const now = new Date().getTime();
				let timeLeft = targetDate - now;
				if (document.getElementById("orclCalc").checked) {
					timeLeft += getRandom();
				}
				if (document.getElementById("orclDisplay").checked) {
					const hours = timeLeft / 3600000;
					displayObjects.set("hours",hours.toFixed(2));
				} else {
					displayObjects.set("days",Math.floor(timeLeft / (1000 * 60 * 60 * 24)));
					displayObjects.set("hours",Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));
					displayObjects.set("minutes",Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60)));
					displayObjects.set("seconds",Math.floor((timeLeft % (1000 * 60))/1000));
				}
				displayObjects.forEach((value,key) => {
					const numContainer = document.getElementById(key);
					numContainer.textContent = value;
				})
			}
		</script>
	</head>
	<body>
		<div id="clockBox">
			<div id="countdownClock"></div>
			<div id="controls">
				<label class="controlItem">
					<input type="checkbox" onchange="initialise()" name="orclDisplay" id="orclDisplay">Oracle display mode<br>
				</label>
				<label class="controlItem">
					<input type="checkbox" name="orclCalc" id="orclCalc">Oracle calculation mode
				</label>
			</div>
		</div>
		<script>initialise()</script>
		<script>setInterval(runClock,1000)</script>
	</body>
</html>
